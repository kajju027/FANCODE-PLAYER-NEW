<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Advanced Live Player</title>
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />

  <style>
    :root{
      --bg:#040506;
      --card:#0b0d10;
      --accent-start:#35d0ff;
      --accent-end:#8b3bff;
      --text:#e9f0fb;
    }
    html,body{margin:0;padding:0;height:100%;background:#000;color:var(--text);font-family:Inter,system-ui,Arial,sans-serif}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;gap:18px;padding:18px;box-sizing:border-box}
    .player-card{width:100%;max-width:920px;background:rgba(255,255,255,0.02);border-radius:14px;padding:18px;box-shadow:0 0 40px rgba(0,200,255,0.08);position:relative;border:1px solid rgba(255,255,255,0.05)}
    video,.plyr{width:100%!important;aspect-ratio:16/9;border-radius:10px}
    footer{width:100%;max-width:920px;display:flex;justify-content:space-between;align-items:center;font-size:13px;opacity:0.85;padding:8px 14px;box-sizing:border-box}
    footer iframe{width:120px;height:18px;border:none}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;z-index:9999}
    .modal{width:min(92%,520px);background:rgba(255,255,255,0.05);border-radius:20px;padding:22px;text-align:center;position:relative;box-shadow:0 0 60px rgba(53,208,255,0.2)}
    .modal h2{margin:6px 0 8px;font-size:28px;color:transparent;background:linear-gradient(90deg,var(--accent-start),var(--accent-end));-webkit-background-clip:text;background-clip:text}
    .modal p{margin:0 0 18px;color:#fff;opacity:.85}
    .join-btn{display:inline-block;padding:12px 26px;border-radius:12px;font-weight:700;border:none;background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:#041226;cursor:pointer}
    .secondary-btn{display:inline-block;margin-top:10px;padding:10px 18px;border-radius:12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.05);color:var(--text);cursor:pointer}
    .close-x{position:absolute;right:14px;top:10px;font-size:18px;color:rgba(255,255,255,0.6);cursor:pointer}
  </style>
</head>
<body>

  <!-- Popup -->
  <div id="entryModal" class="overlay">
    <div class="modal">
      <div class="close-x" id="modalClose">âœ•</div>
      <h2>Support Us!</h2>
      <p>Join our Telegram for latest updates.</p>
      <a class="join-btn" href="https://t.me/yourtelegram" target="_blank" rel="noopener">Join Now</a>
      <div><button id="alreadyBtn" class="secondary-btn">Already Joined</button></div>
    </div>
  </div>

  <div class="wrap">
    <div class="player-card">
      <video id="player" controls playsinline></video>
    </div>

    <footer>
      <div>SAYAN OAI - All Rights Reserved</div>
      <iframe src="https://counter1.optistats.ovh/private/freecounterstat.php?c=5ggh91rsudsf178p2fp3f6r7e4jmw8jj" title="visitor counter"></iframe>
    </footer>
  </div>

  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

  <script>
    const player = new Plyr('#player', {
      controls:['play-large','play','progress','current-time','mute','volume','settings','pip','airplay','fullscreen'],
      settings:['speed','captions'],
      tooltips:{controls:true,seek:true}
    });

    // Get ?live= URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const liveURL = urlParams.get('live');

    // Load m3u8 dynamically
    const video = document.getElementById('player');
    if(liveURL){
      if(Hls.isSupported()){
        const hls = new Hls();
        hls.loadSource(liveURL);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED,()=>{video.play();});
      }else if(video.canPlayType('application/vnd.apple.mpegurl')){
        video.src = liveURL;
        video.addEventListener('loadedmetadata',()=>{video.play();});
      }
    }else{
      video.insertAdjacentHTML('beforebegin','<p style="text-align:center;color:#aaa">No live link provided.</p>');
    }

    // Popup control
    const entryModal=document.getElementById('entryModal');
    document.getElementById('modalClose').onclick=()=>entryModal.style.display='none';
    document.getElementById('alreadyBtn').onclick=()=>entryModal.style.display='none';
  </script>
</body>
</html>
